<?php

namespace hughcube\helpers;

class Emotion
{
    public $emotionList = [
        '[呵呵]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/ac/smilea_thumb.gif',
            'text' => '呵呵'
        ],
        '[嘻嘻]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/0b/tootha_thumb.gif',
            'text' => '嘻嘻'
        ],
        '[哈哈]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6a/laugh.gif',
            'text' => '哈哈'
        ],
        '[可爱]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/14/tza_thumb.gif',
            'text' => '可爱'
        ],
        '[可怜]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/kl_thumb.gif',
            'text' => '可怜'
        ],
        '[挖鼻屎]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/a0/kbsa_thumb.gif',
            'text' => '挖鼻屎'
        ],
        '[吃惊]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f4/cj_thumb.gif',
            'text' => '吃惊'
        ],
        '[害羞]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6e/shamea_thumb.gif',
            'text' => '害羞'
        ],
        '[挤眼]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c3/zy_thumb.gif',
            'text' => '挤眼'
        ],
        '[闭嘴]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/29/bz_thumb.gif',
            'text' => '闭嘴'
        ],
        '[鄙视]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/71/bs2_thumb.gif',
            'text' => '鄙视'
        ],
        '[爱你]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6d/lovea_thumb.gif',
            'text' => '爱你'
        ],
        '[泪]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/9d/sada_thumb.gif',
            'text' => '泪'
        ],
        '[偷笑]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/19/heia_thumb.gif',
            'text' => '偷笑'
        ],
        '[亲亲]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/8f/qq_thumb.gif',
            'text' => '亲亲'
        ],
        '[生病]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/b6/sb_thumb.gif',
            'text' => '生病'
        ],
        '[太开心]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/58/mb_thumb.gif',
            'text' => '太开心'
        ],
        '[懒得理你]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/17/ldln_thumb.gif',
            'text' => '懒得理你'
        ],
        '[右哼哼]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/98/yhh_thumb.gif',
            'text' => '右哼哼'
        ],
        '[左哼哼]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6d/zhh_thumb.gif',
            'text' => '左哼哼'
        ],
        '[嘘]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/a6/x_thumb.gif',
            'text' => '嘘'
        ],
        '[衰]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/cry.gif',
            'text' => '衰'
        ],
        '[委屈]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/73/wq_thumb.gif',
            'text' => '委屈'
        ],
        '[吐]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/9e/t_thumb.gif',
            'text' => '吐'
        ],
        '[打哈欠]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f3/k_thumb.gif',
            'text' => '打哈欠'
        ],
        '[抱抱]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/27/bba_thumb.gif',
            'text' => '抱抱'
        ],
        '[怒]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7c/angrya_thumb.gif',
            'text' => '怒'
        ],
        '[疑问]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/5c/yw_thumb.gif',
            'text' => '疑问'
        ],
        '[馋嘴]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/a5/cza_thumb.gif',
            'text' => '馋嘴'
        ],
        '[拜拜]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/70/88_thumb.gif',
            'text' => '拜拜'
        ],
        '[思考]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e9/sk_thumb.gif',
            'text' => '思考'
        ],
        '[汗]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/24/sweata_thumb.gif',
            'text' => '汗'
        ],
        '[困]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7f/sleepya_thumb.gif',
            'text' => '困'
        ],
        '[睡觉]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6b/sleepa_thumb.gif',
            'text' => '睡觉'
        ],
        '[钱]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/90/money_thumb.gif',
            'text' => '钱'
        ],
        '[失望]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/0c/sw_thumb.gif',
            'text' => '失望'
        ],
        '[酷]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/40/cool_thumb.gif',
            'text' => '酷'
        ],
        '[花心]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/8c/hsa_thumb.gif',
            'text' => '花心'
        ],
        '[哼]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/49/hatea_thumb.gif',
            'text' => '哼'
        ],
        '[鼓掌]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/36/gza_thumb.gif',
            'text' => '鼓掌'
        ],
        '[晕]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d9/dizzya_thumb.gif',
            'text' => '晕'
        ],
        '[悲伤]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/1a/bs_thumb.gif',
            'text' => '悲伤'
        ],
        '[抓狂]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/62/crazya_thumb.gif',
            'text' => '抓狂'
        ],
        '[黑线]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/91/h_thumb.gif',
            'text' => '黑线'
        ],
        '[阴险]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6d/yx_thumb.gif',
            'text' => '阴险'
        ],
        '[怒骂]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/89/nm_thumb.gif',
            'text' => '怒骂'
        ],
        '[心]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/40/hearta_thumb.gif',
            'text' => '心'
        ],
        '[伤心]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/ea/unheart.gif',
            'text' => '伤心'
        ],
        '[猪头]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/58/pig.gif',
            'text' => '猪头'
        ],
        '[ok]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d6/ok_thumb.gif',
            'text' => 'ok'
        ],
        '[耶]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d9/ye_thumb.gif',
            'text' => '耶'
        ],
        '[good]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d8/good_thumb.gif',
            'text' => 'good'
        ],
        '[不要]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c7/no_thumb.gif',
            'text' => '不要'
        ],
        '[赞]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d0/z2_thumb.gif',
            'text' => '赞'
        ],
        '[来]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/40/come_thumb.gif',
            'text' => '来'
        ],
        '[弱]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d8/sad_thumb.gif',
            'text' => '弱'
        ],
        '[蜡烛]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/91/lazu_thumb.gif',
            'text' => '蜡烛'
        ],
        '[蛋糕]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6a/cake.gif',
            'text' => '蛋糕'
        ],
        '[钟]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d3/clock_thumb.gif',
            'text' => '钟'
        ],
        '[话筒]' => [
            'src' => 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/1b/m_thumb.gif',
            'text' => '话筒'
        ],
    ];

    /**
     * 把表情替换为图片地址
     * @param string $text
     * @return string
     */
    static public function textToEmotionImg($text)
    {
        $text = preg_replace("/\[([^<>`~!@#$%^&*(){}\[\]]+)\]/ise", "self::emotionTextToImg('\\0')", $text);

        return $text;
    }

    /**
     * 文本转换图片
     * @param string $text
     * @return string
     */
    static public function emotionTextToImg($text)
    {
        $emotion = $GLOBALS['EMOTION_LIST'][$text];
        if (isset($emotion)) {
            $text = ' <img src=" ' . $emotion['src'] . ' " title=" ' . $emotion['text'] . ' " /> ';
        }

        return $text;
    }

    static public function iconToText($text)
    {
        if (preg_match_all('/\<img[^>]+title\s*=\s*[\'\"]?([^\'\"]*)[\'\"]?\s*[^>]+\>/is', $text, $match)) {
            if (!empty($match[0]) && is_array($match[0])) {
                foreach ($match[0] as $k => $v) {
                    $text = str_replace($v, '[' . trim($match[1][$k]) . ']', $text);
                }
            }
        }

        return $text;
    }
}
